<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Encodear con FFmpeg: HEVC (H.265) • Contempo</title>
  <script src="../../js/head-article.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <script src="../../js/header.js"></script>
    </header>

    <article>
      <h1>Encodear con FFmpeg: HEVC (H.265)</h1>

      <p>En esta tercera parte de encodear con FFmpeg, le toca el turno al nuevo codec de video <a href="http://es.wikipedia.org/wiki/H.265"><abbr title="High Efficiency Video Coding">HEVC</abbr></a>.</p>

      <p>Ya encodeamos <a href="https://cont3mpo.github.io/post/2013/encodear-con-ffmpeg.html">en H.264</a>, también <a href="https://cont3mpo.github.io/post/2014/encodear-con-ffmpeg-vp9.html">en VP9</a>, y ahora será en <abbr title="High Efficiency Video Coding">HEVC</abbr> (H.265). Y justo hoy se lanzó <a href="http://git.videolan.org/?p=ffmpeg.git;a=blob;f=RELEASE_NOTES;hb=release/2.6">FFmpeg 2.6</a> con algunas optimizaciones en <abbr title="High Efficiency Video Coding">HEVC</abbr>, el cual ya está casi funcionando bien. Y vale la pena adelantarse.</p>

      <h2>Instalar FFmpeg</h2>

      <p>En Ubuntu/elementary OS se agrega un <a href="https://launchpad.net/~mc3man/+archive/ubuntu/trusty-media">PPA actualizado con FFmpeg</a>, e instalan FFmpeg (otro <a href="https://launchpad.net/~djcj/+archive/ubuntu/hybrid">PPA de respaldo</a>).</p>

      <p>En macOS instala FFmpeg usando <a href="http://brew.sh/index_es.html">Homebrew</a>. Y para instalar los encoders que faltan:</p>

      <code>brew reinstall ffmpeg --with-faac --with-x265</code>
      
      <p>También puedes <a href="https://evermeet.cx/ffmpeg/">descargar un binario de FFmpeg</a> con su última versión para macOS, e incluye todos los codecs. Solamente lo instalas en la ruta /usr/local/bin y lo abres manteniendo el la tecla alt y click derecho en Abrir para dar permisos de ejecución.</p>

      <h2>Configurar CRF y 10-bit</h2>

      <p>Afortunadamente se puede usar Constant Rate Factor (<abbr title="Constant Rate Factor">CRF</abbr>). Usaremos el encoder <a href="http://es.wikipedia.org/wiki/X265">x265</a> para encodear a <abbr title="High Efficiency Video Coding">HEVC</abbr>.</p>

      <p>En <abbr title="High Efficiency Video Coding">HEVC</abbr> usan un <abbr title="Constant Rate Factor">CRF</abbr> con un <a href="http://x265.readthedocs.org/en/default/cli.html#cmdoption--crf">rango de medición de calidad entre 0 a 51</a>, siendo 0 lo mejor y 51 lo peor. Por defecto usa 28, pero recomiendo 18. Los preset de compresión por defecto usan medium (<a href="http://x265.readthedocs.org/en/default/cli.html#cmdoption--preset">hay varios disponibles</a>), y agregaremos un profile Main10 para los 10-bit. Todo lo demás por defecto:</p>

      <code>ffmpeg -i entrada.mkv -c:v libx265 -crf 18 -profile:v main10 -x265-params level=5.1 -c:a copy salida.mkv</code>

      <p>Con <abbr title="High Efficiency Video Coding">HEVC</abbr> obtienes menos peso y mejor calidad de imagen.</p>

      <time datetime="2015-03-07">7 de marzo, 2015</time>
    </article>
  </div>
</body>
</html>
